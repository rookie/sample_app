/*    HTTP Host:  b.static.ak.fbcdn.net                                        */
/*    Generated:  February 16th 2010 9:11:30 PM PST                            */
/*      Machine:  10.16.140.104                                                */
/*       Source:  Global Cache                                                 */
/*     Location:  js/adg09dp03ew44kk0.pkg.js h:31j77gfo                        */
/*       Locale:  nu_ll                                                        */
/*         Path:  js/adg09dp03ew44kk0.pkg.js                                   */

((location=='about:blank'&&(window.parent.eval_global||window.parent.eval))||(window.eval_global||window.eval))("if (window.CavalryLogger) { CavalryLogger.start_js([\"js\\\/adg09dp03ew44kk0.pkg.js\"]); }\n\nfunction EMUFrame(a,d,b,e,c){this.eiData_=d;this.flags_=e;this.contextType_=b;this.data_=c;this.container_=$(a);DataStore.set(this.container_,'emuClient',this);return this;}copy_properties(EMUFrame,{getClient:function(a){var b=ge(a);if(!b)return null;return DataStore.get(b,'emuClient');}});copy_properties(EMUFrame.prototype,{EVENT_HANDLER_PATH:'\/ae.php',EVENT_NAME_CAME_BACK:'cameback',FLAG_LOGGING_DISABLED:1,FLAG_FEEDBACK_DISABLED:2,FLAG_LOGGING_DISABLED_JAVASCRIPT:4,FLAG_ADS_NO_REFRESH_ON_DISLIKE:8,onEvent:function(c,b,d,a){var e={i:this.eiData_,f:this.flags_,c:this.contextType_,en:c};if(b)e.ed=JSON.encode(b);if(!a)var a=bagofholding;if(d){new AsyncRequest().setURI(this.EVENT_HANDLER_PATH).setData(e).setHandler(d).setErrorHandler(a).setTransportErrorHandler(a).send();}else new AsyncSignal(this.EVENT_HANDLER_PATH,e).send();},setClicked:function(a){if(this.clicked_)return;if(a.getModifiers().any||a.button!=0)return;this.listeners_=[Event.listen(document.body,'mousedown',this.cameBack.bind(this)),Event.listen(window,'scroll',this.cameBack.bind(this)),Event.listen(window,'unload',this.cameBack.bind(this))];this.clicked_=(+new Date());},cameBack:function(event){if(!this.clicked_)return;var a=(+new Date())-this.clicked_;for(var b=this.listeners_.length;b--;)this.listeners_[b].remove();this.listeners_=[];this.clicked_=false;this.onEvent(this.EVENT_NAME_CAME_BACK,a);}});function EMUTrackingFrame(a,d,b,e,c){this.parent.construct(this,a,d,b,e,c);if(this.data_.isNewWindow)if(this.data_.isHomepage){this.linkTitle_=DOM.find(this.container_,'a.ad_title');this.linkImage_=DOM.find(this.container_,'a.ad_image');this.linkBody_=DOM.find(this.container_,'a.ad_text');Event.listen(this.linkTitle_,'click',this.setClicked.bind(this));Event.listen(this.linkImage_,'click',this.setClicked.bind(this));Event.listen(this.linkBody_,'click',this.setClicked.bind(this));}else{this.linkTitle_=DOM.find(this.container_,'a.UIEMUASFrame_title');this.linkImageAndBody_=DOM.find(this.container_,'a.UIEMUASFrame_imageAndBody');Event.listen(this.linkTitle_,'click',this.setClicked.bind(this));Event.listen(this.linkImageAndBody_,'click',this.setClicked.bind(this));}return this;}EMUTrackingFrame.extend('EMUFrame');\nfunction emu_Client(g,h,a,f,e,c,b,d){this.unitId=g;this.unitType=h;this.contextType=a;this.root=f;this.iData=e;this.flags=b;this.hash=d;this.frameStates={};this.eventFrameId=null;this.setStates(c);DataStore.set(this.root,'emuClient',this);}copy_properties(emu_Client,{constants:{EMU_FRAME_EVENT_INIT:1,EMU_FRAME_EVENT_CLICK:2,EMU_FRAME_EVENT_SUBMIT:3,EMU_SERVER_COMMAND_RENDER_FRAME:1000,EMU_SERVER_COMMAND_SET_FRAME_STATE:1001,EMU_SERVER_COMMAND_PLAY_VIDEO:1003,EMU_CLIENT_COMMAND_FRAME_EVENT:2000,EMU_LINK_TARGET_DEFAULT:1,EMU_LINK_TARGET_NEW_WINDOW:2,EMU_FRAME_CONTEXT_TARGET_INLINE:1,EMU_FRAME_CONTEXT_TARGET_DIALOG:2,EMU_FRAME_EVENT_HANDLER:'\/ajax\/emu\/h.php'},getParentDivId:function(a){return 'emu_'+a;},getClient:function(b){var a=ge(emu_Client.getParentDivId(b));if(!a)return null;return DataStore.get(a,'emuClient');}});copy_properties(emu_Client.prototype,{getFrameDivId:function(a){return emu_Client.getParentDivId(this.unitId)+'_'+a;},_emuCmdHandler:function(a){var g=a.getPayload();for(var f=0;f<g.length;f++){var b=g[f];switch(b.cmd){case emu_Client.constants.EMU_SERVER_COMMAND_RENDER_FRAME:if(emu_Client.constants.EMU_FRAME_CONTEXT_TARGET_INLINE==b.params.surface.targetType){var e=this.getFrameDivId(b.params.surface.targetId);var d=ge(e);if(!d){var d=$N('div',{id:e});this.root.appendChild(d);}set_inner_html(d,b.params.surface.buffer);}else if(emu_Client.constants.EMU_FRAME_CONTEXT_TARGET_DIALOG==b.params.surface.targetType){if(!this.root.dialog||!this.root.dialog._showing)this.root.dialog=new Dialog();var c=this.root.dialog;if(b.params.surface.buffer)c.setBody(b.params.surface.buffer);if(b.params.surface.title)c.setTitle(b.params.surface.title);if(b.params.surface.width)c.setContentWidth(b.params.surface.width);c.setButtons(Dialog.OK).show();}break;case emu_Client.constants.EMU_SERVER_COMMAND_SET_FRAME_STATE:this.frameStates[b.params.frameId]=b.params.state;break;}}this.eventFrameId=null;},_emuErrorHandler:function(d){var c=ge('submit_progress_'+this.eventFrameId);if(c)CSS.addClass(c,'hidden');frameDiv=ge(this.getFrameDivId(this.eventFrameId));if(frameDiv){var b=get_all_form_inputs(frameDiv);for(var a=0;a<b.length;a++)b[a].disabled=false;}this.eventFrameId=null;},setStates:function(b){for(var a in b)this.frameStates[a]=b[a];},onEvent:function(e,c,b){if(this.eventFrameId)return;this.eventFrameId=e;switch(c){case emu_Client.constants.EMU_FRAME_EVENT_CLICK:var a=b;break;case emu_Client.constants.EMU_FRAME_EVENT_SUBMIT:var a=serialize_form(b);var d=get_all_form_inputs(b);for(var f=0;f<d.length;f++)d[f].disabled=true;var h=ge('submit_progress_'+this.eventFrameId);if(h)CSS.removeClass(h,'hidden');break;}var g={fss:this.frameStates,ut:this.unitType,ct:this.contextType,f:this.flags,x:this.hash,ida:this.iData,fid:e,et:c,ed:a,rt:'a'};var i=new AsyncRequest();i.setURI(emu_Client.constants.EMU_FRAME_EVENT_HANDLER).setData(g).setHandler(bind(this,'_emuCmdHandler')).setErrorHandler(bind(this,'_emuErrorHandler')).setTransportErrorHandler(bind(this,'_emuErrorHandler')).send();},onRedirect:function(e,b,h){var c=this.root.appendChild($N('form',{action:emu_Client.constants.EMU_FRAME_EVENT_HANDLER,method:'POST',target:(emu_Client.constants.EMU_LINK_TARGET_NEW_WINDOW==h)?'_blank':'',style:{display:'none'}}));var f={ut:this.unitType,ct:this.contextType,f:this.flags,x:this.hash,ida:this.iData,fid:e,et:emu_Client.constants.EMU_FRAME_EVENT_CLICK,rt:'h'};for(var a in b)f['ed['+a+']']=b[a];for(var d in this.frameStates)f['fss['+d+']']=this.frameStates[d];if(ge('post_form_id'))f.post_form_id=$('post_form_id').value;if(ge('fb_dtsg'))f.fb_dtsg=$('fb_dtsg').value;for(var g in f)c.appendChild($N('input',{type:'hidden',name:g,value:f[g]}));c.submit();this.root.removeChild(c);}});function emu_redirect_wrapper(a){emu_Client.getClient(a.adId).onRedirect(a.frameId,a.eventData,a.target);return false;}function emu_action_wrapper(a){emu_Client.getClient(a.adId).onEvent(a.frameId,a.eventType,a.eventData);return false;}\nfunction InviteEmuUIController(a,b,c){this.parent.construct(this,a,b,c);return this;}InviteEmuUIController.extend('CommentableEmuUIController');copy_properties(InviteEmuUIController.prototype,{_init:function(){this.parent._init();},_getCommentInput:function(){return DOM.scry(this.emuFrame,'input[name=\"email_list\"]')[0];}});\nfunction SMSLinkEmuUIController(a,b,c){this.parent.construct(this,a,b,c);return this;}SMSLinkEmuUIController.extend('CommentableEmuUIController');copy_properties(SMSLinkEmuUIController.prototype,{_init:function(){this.parent._init();},_getCommentInput:function(){return DOM.scry(this.emuFrame,'input[name=\"phone_number\"]')[0];}});\nfunction AsyncLayout(){}AsyncLayout.prototype={init:function(b,a){this.canvas=b;this.auxiliary=a;this.auxEndpoints={};this.subscription=Arbiter.subscribe(NavigationMessage.NAVIGATION_BEGIN,this.onNavigate.bind(this));Arbiter.subscribe(NavigationMessage.NAVIGATION_REMOVED,function(){Arbiter.unsubscribe(this.subscription);}.bind(this));return this;},setAuxiliaryEndpoints:function(b){for(var a in b)this.auxEndpoints[a]=b[a];},onNavigate:function(b,a){if(a.endpoint){a.handled=true;if(this.request){this.request.setFinallyHandler(bagofholding);this.request.abort();}if(this.sideRequest)this.sideRequest.abort();if(a.sidecol&&this.auxEndpoints[a.endpoint]){this.sideRequest=new AsyncRequest(this.auxEndpoints[a.endpoint]).setData({key:a.key}).setHandler(this.onSideResponse.bind(this));this.sideRequest.send();}this.request=new AsyncRequest(a.endpoint).setReadOnly(true).setMethod('GET').setData(a).setHandler(this.onResponse.bind(this)).setErrorHandler(this.errorHandler.bind(this)).setTransportErrorHandler(this.errorHandler.bind(this)).setFinallyHandler(this.finallyHandler.bind(this));this.request.send();}},onSideResponse:function(b){var a=b.getPayload();if(a&&this.auxiliary)DOM.setContent(this.auxiliary,HTML(a));},onResponse:function(c){var b=c.getPayload();if(b.redirect){goURI(b.redirect);}else{var a=b.html||b;DOM.setContent(this.canvas,HTML(a));if(b.side_html&&this.auxiliary)DOM.setContent(this.auxiliary,HTML(b.side_html));if(b.js)(new Function(b.js))();CSS.conditionClass('mainContainer','hasRightCol',!b.noRightSide);}Arbiter.inform(NavigationMessage.NAVIGATION_COMPLETED);},errorHandler:function(a){ErrorDialog.showAsyncError(a);Arbiter.inform(NavigationMessage.NAVIGATION_FAILED);},finallyHandler:function(a){this.request=null;PageTransitions.transitionComplete();}};\nfunction UISideNav(){}UISideNav.prototype={init:function(b,a){this.root=b;if(a){this.defaultKey=a.defaultKey;this.loadingNode=null;var c=URI.getRequestURI();this.path=this.equivalentPath(c.getPath());this.domain=c.getDomain();PageTransitions.registerHandler(this.catchPageTransition.bind(this));Arbiter.subscribe(NavigationMessage.NAVIGATION_COMPLETED,this.navigationComplete.bind(this));Arbiter.subscribe(NavigationMessage.NAVIGATION_FAILED,this.navigationFailed.bind(this));Arbiter.subscribe(NavigationMessage.NAVIGATION_SELECT,this.navigationSelect.bind(this));}},setEndpoints:function(a,b){this.endpoints=a;this.endpointPrefix=b||'';},getEndpoint:function(a){return this.endpoints?this.endpoints[a]||this.endpoints:'';},equivalentPath:function(a){return (a=='\/home.php')?'\/':a;},catchPageTransition:function(c){if(this.path!=this.equivalentPath(c.getPath())||this.domain!=c.getDomain()){Arbiter.inform(NavigationMessage.NAVIGATION_REMOVED);return false;}var b=c.getQueryData();var a=b.sk;if(a===undefined)a=this.defaultKey;this.loadKey(a);return this.handlePageTransition(b,a);},handlePageTransition:function(c,b){var a=this.getEndpoint(b);if(!(typeof a=='string'))return false;a=this.endpointPrefix+a;copy_properties(c,{key:b,endpoint:a,sidecol:this.refreshRightColumn});Arbiter.inform(NavigationMessage.NAVIGATION_BEGIN,c);return true;},loadKey:function(b){var a=DOM.scry(this.root,'li.key-'+b);this.loadingNode&&CSS.removeClass(this.loadingNode,'loading');if(a.length){this.loadingNode=a[0];CSS.addClass(this.loadingNode,'loading');this.refreshRightColumn=this.isTopLevelNode(this.loadingNode);}else this.refreshRightColumn=false;},isTopLevelNode:function(a){return (a&&a.firstChild&&(CSS.hasClass(a.firstChild,'item')||CSS.hasClass(a.firstChild,'inputsearch')));},navigationSelect:function(c,a){var b=a.sk;if(b!==undefined){this.loadKey(b);if(!a.asLoading)this.navigationComplete();}},navigationFailed:function(){CSS.removeClass(this.loadingNode,'loading');this.loadingNode=null;},navigationComplete:function(){if(this.loadingNode){CSS.removeClass(this.loadingNode,'loading');var a=null;if(this.isTopLevelNode(this.loadingNode)){a=this.loadingNode;}else a=this.loadingNode.parentNode.parentNode;if(!CSS.hasClass(a,'open')){this.root.scry('li.open').each(function(b){CSS.removeClass(b,'open');});CSS.addClass(a,'open');}this.root.scry('li.selected').each(function(b){CSS.removeClass(b,'selected');});this.loadingNode.addClass('selected');this.loadingNode=null;}},toggleHiddenSection:function(){CSS.toggleClass(this.root.parentNode,'expandedMode');return false;}};\nfunction FBSideNav(){this.parent.construct(this);}FBSideNav.extend('UISideNav');FBSideNav.STATUS_UPDATE_APP_ID=2915120374;FBSideNav.prototype={init:function(b,a){this.parent.init(b,a);Event.listen(this.root,'click',function(event){var c=event.getTarget();if(DOM.isNode(c,'input'))CSS.addClass(DOM.getNearest(c,'li'),'hidden_elem');});if(ua.ie()<7)DOM.scry(this.root,'li').each(function(c){Event.listen(c,{mouseover:CSS.addClass.bind(null,c,'hover'),mouseout:CSS.removeClass.bind(null,c,'hover')});});Arbiter.subscribe(NavigationMessage.NAVIGATION_COUNT_UPDATE,this.navigationCountUpdate.bind(this));},handlePageTransition:function(d,b){var a=this.getEndpoint(b);var e=null;if(window.UIIntentionalStream&&window.UIIntentionalStream.instances){if(UIIntentionalStream.instances.nile)e=UIIntentionalStream.instances.nile;UIIntentionalStream.instances.global&&UIIntentionalStream.instances.global.unload();UIIntentionalStream.instances.friends&&UIIntentionalStream.instances.friends.unload();}if(e&&a=='feed.php'){d.filter=b;var c={filter:b,nav:this};e.refresh(UIIntentionalStream.REFRESH_TRANSITION,d,c);return true;}else{e&&e.unload();return this.parent.handlePageTransition(d,b);}},navigationCountUpdate:function(e,c){if(!c||!c['key']||c.count===undefined)return;var d=DOM.find(this.root,'li.key-'+c.key);var b=DOM.scry(d,'span.count');if(b){var a=b[0];DOM.setContent(DOM.find(a,'span.countValue'),c.count);CSS.conditionClass(a,'hidden_elem',!c['count']);}},navigationComplete:function(){DOMScroll.scrollTo(document.documentElement,false);return this.parent.navigationComplete();},focusComposer:function(){NewHigh.showComposer(FBSideNav.STATUS_UPDATE_APP_ID);}};\nfunction pagecache_log_feed_tracking(){var b=DOM.scry(document.body,'div.UIStory');var a=b.map(function(c){return collect_data_attrib(c,'ft');});a=a.filter(count).map(JSON.encode);if(!a.length)return;new AsyncRequest().setMethod('POST').setURI('\/ajax\/feed_tracking_pagecache.php').setReadOnly(true).setOption('bundle',true).setData({ft:$A(a)}).send();}\nvar MegaphoneHelper={hideStory:function(f,e,d,a){var b={mp_id:f,location:e,context:a};new AsyncRequest().setURI('\/ajax\/megaphone\/megaphone_hide.php').setMethod('POST').setData(b).setHandler(function(h){if(h.isReplay()){var g=ge(d);g&&hide(g);}}).send();var c=ge(d);if(c)animation(c).to('height',0).duration(500).hide().go();},createModalStory:function(g,a,b,f,e,c){var d;if(!b||!b.length){b=Dialog.CLOSE;d=this.hideStory.bind(this,f,e,c);}else d=bagofholding;new Dialog().setImmediateRendering(true).setTitle(g).setBody(a).setModal(true,Dialog.MODALITY.WHITE).setStackable(true,true).setContentWidth(670).setAutoFocus(false).setButtons(b).setHandler(d).show();}};\n\nif (window.Bootloader) { Bootloader.done([\"js\\\/adg09dp03ew44kk0.pkg.js\"]); }")